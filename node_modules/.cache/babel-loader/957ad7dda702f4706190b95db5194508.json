{"ast":null,"code":"import _classCallCheck from\"C:\\\\xampp\\\\htdocs\\\\metaok\\\\my-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\xampp\\\\htdocs\\\\metaok\\\\my-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\xampp\\\\htdocs\\\\metaok\\\\my-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\xampp\\\\htdocs\\\\metaok\\\\my-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\xampp\\\\htdocs\\\\metaok\\\\my-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\xampp\\\\htdocs\\\\metaok\\\\my-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Link}from'react-router-dom';var RequestEditor=/*#__PURE__*/function(_Component){_inherits(RequestEditor,_Component);function RequestEditor(){var _this;_classCallCheck(this,RequestEditor);_this=_possibleConstructorReturn(this,_getPrototypeOf(RequestEditor).call(this));_this.state={asset:{\"nid\":null,\"stateNid\":null,\"typeNid\":null,\"brandNid\":null,\"modelNid\":null,\"locationNid\":null,\"orgUnitNid\":null},urgencies:[],states:[]};_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(RequestEditor,[{key:\"handleSubmit\",value:function handleSubmit(e){var _this2=this;e.preventDefault();if(e.target.urgency_nid.value===-3&&(e.target.motivo.value===null||e.target.motivo.value==='')){alert(\"Debe ingresar un Motivo de Urgencia\");}else{var request={\"regUsrNid\":1,\"assetNid\":this.state.asset.nid,\"orgUnitNid\":this.state.asset.orgUnitNid,\"assetLocationNid\":this.state.asset.locationNid,\"assetStateNid\":parseInt(e.target.state_nid.value),\"urgencyNid\":parseInt(e.target.urgency_nid.value),\"urgencyReason\":e.target.motivo.value,\"reqNid\":1,\"problemText\":e.target.problem.value};fetch('https://demo.metaok.com/metacmms_test/api/corrective/v1/requests',{method:'POST',body:JSON.stringify(request),headers:{\"Content-Type\":\"application/json\"}}).then(function(response){if(response.status!==200){console.log('Looks like there was a problem. Status Code: '+response.status);throw Error(response.status);;}return response;}).then(function(response){return response.json();}).then(function(data){alert(\"Solicitud #\"+data.nid+\" generada con éxito\");_this2.props.history.push({pathname:'/'});}).catch(function(error){console.log(error);});// .then(response => response.json())\n// .then(data => {\n//     if(data.type==\"OK\"){\n//       alert(\"Solicitud #\"+data.data.nid+\" generada con éxito\");\n//       this.props.history.push(\n//         {\n//           pathname: '/'\n//         }\n//       )\n//     }\n//   }\n// )\n// .catch(function(error) {console.log(error);});\n}}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;fetch('https://demo.metaok.com/metacmms_test/api/inventory/v1/assets/'+this.props.match.params.nid,{method:'GET',headers:{\"Content-Type\":\"application/json\"}}).then(function(response){return response.json();}).then(function(data){_this3.setState({asset:data.data});}).catch(function(error){console.log(error);});fetch('https://demo.metaok.com/metacmms_test/api/corrective/v1/request-urgencies',{method:'GET',headers:{\"Content-Type\":\"application/json\"}}).then(function(response){if(response.status!==200){console.log('Looks like there was a problem. Status Code: '+response.status);throw Error(response.status);;}return response;}).then(function(response){return response.json();}).then(function(data){_this3.setState({urgencies:data});}).catch(function(error){console.log(error);});fetch('https://demo.metaok.com/metacmms_test/api/inventory/v1/asset-states',{method:'GET',headers:{\"Content-Type\":\"application/json\"}}).then(function(response){return response.json();}).then(function(data){_this3.setState({states:data.data});}).catch(function(error){console.log(error);});}},{key:\"render\",value:function render(){var urgencies=this.state.urgencies.map(function(data,index){return React.createElement(\"div\",{className:\"form-check form-check-inline\"},React.createElement(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"urgency_nid\",id:data.id,value:data.nid,key:data.id,required:true}),React.createElement(\"label\",{className:\"form-check-label\"},data.name));});var states=this.state.states.map(function(data,index){return React.createElement(\"div\",{className:\"form-check form-check-inline\"},React.createElement(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"state_nid\",id:data.id,value:data.nid,key:data.id,required:true}),React.createElement(\"label\",{className:\"form-check-label\"},data.name));});return React.createElement(\"div\",{className:\"container\"},React.createElement(\"div\",{className:\"row row-header  bg-success\"},React.createElement(\"div\",{className:\"col-lg\"},\"Solicitud MC\"),React.createElement(\"div\",{className:\"col-lg\"},this.state.asset.typeNid!=null&&this.state.asset.type.name,\" \",this.state.asset.brandNid!=null&&this.state.asset.brand.name),React.createElement(\"div\",{className:\"col-lg\"},this.state.asset.modelNid!=null&&this.state.asset.model.name),React.createElement(\"div\",{className:\"col-lg\"},this.state.asset.stateNid!=null&&this.state.asset.state.name)),React.createElement(\"form\",{onSubmit:this.handleSubmit},React.createElement(\"div\",{className:\"row\",style:{textAlign:'center',marginTop:'20px'}},React.createElement(\"div\",{className:\"col-lg\"},React.createElement(\"div\",{className:\"separator\"},React.createElement(\"span\",null,\"Urgencia\")),urgencies,React.createElement(\"div\",{className:\"form-group\",style:{marginTop:'20px'}},React.createElement(\"label\",null,\"Motivo\"),React.createElement(\"textarea\",{className:\"form-control\",rows:\"2\",id:\"motivo\",name:\"motivo\"})),React.createElement(\"div\",{className:\"separator\"},React.createElement(\"span\",null,\"Problema\")),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"textarea\",{className:\"form-control\",rows:\"3\",id:\"problem\",name:\"problem\",required:true})),React.createElement(\"div\",{className:\"separator\"},React.createElement(\"span\",null,\"Estado del equipo\")),React.createElement(\"div\",{style:{textAlign:'left'}},states))),React.createElement(\"div\",{className:\"row\",style:{marginTop:'20px',marginBottom:'30px'}},React.createElement(\"div\",{className:\"col-md-4\",style:{textAlign:'center'}},React.createElement(\"button\",{className:\"btn btn-outline-primary btn-lg btn-full\"},\"Enviar\")),React.createElement(\"div\",{className:\"col-md-4\",style:{textAlign:'center',marginTop:'20px'}},React.createElement(Link,{to:{pathname:\"/assetEditor/\".concat(this.props.match.params.nid)}},React.createElement(\"button\",{type:\"button\",className:\"btn btn-outline-secondary btn-lg btn-full\"},\"Regresar\"))))));}}]);return RequestEditor;}(Component);export default RequestEditor;// <div className=\"form-check form-check-inline\">\n//   <input className=\"form-check-input\" type=\"radio\" name=\"urgency_nid\" id=\"urgency_nid\" value=\"-3\"  required/>\n//   <label className=\"form-check-label\">Urgente</label>\n// </div>\n// <div className=\"form-check form-check-inline\">\n//   <input className=\"form-check-input\" type=\"radio\" name=\"urgency_nid\" id=\"urgency_nid\" value=\"-2\" required/>\n//   <label className=\"form-check-label\" >Normal</label>\n// </div>\n// <div className=\"form-check form-check-inline\">\n//   <input className=\"form-check-input\" type=\"radio\" name=\"urgency_nid\" id=\"urgency_nid\" value=\"-1\" required/>\n//   <label className=\"form-check-label\" >Baja</label>\n// </div>\n//\n// <div className=\"form-check form-check\" >\n//   <input className=\"form-check-input\" type=\"radio\" name=\"state_nid\" id=\"state_nid\" value=\"1\" required/>\n//   <label className=\"form-check-label\">En servicio</label>\n// </div>\n// <div className=\"form-check form-check\">\n//   <input className=\"form-check-input\" type=\"radio\" name=\"state_nid\" id=\"state_nid\" value=\"-2\" required/>\n//   <label className=\"form-check-label\" >Fuera de Servicio</label>\n// </div>\n// <div className=\"form-check form-check\">\n//   <input className=\"form-check-input\" type=\"radio\" name=\"state_nid\" id=\"state_nid\" value=\"-3\" required/>\n//   <label className=\"form-check-label\" >En Servicio con errores</label>\n// </div>","map":{"version":3,"sources":["C:/xampp/htdocs/metaok/my-app/src/components/requestEditor.js"],"names":["React","Component","Link","RequestEditor","state","asset","urgencies","states","handleSubmit","bind","e","preventDefault","target","urgency_nid","value","motivo","alert","request","nid","orgUnitNid","locationNid","parseInt","state_nid","problem","fetch","method","body","JSON","stringify","headers","then","response","status","console","log","Error","json","data","props","history","push","pathname","catch","error","match","params","setState","map","index","id","name","typeNid","type","brandNid","brand","modelNid","model","stateNid","textAlign","marginTop","marginBottom"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\r\nimport { Link } from 'react-router-dom';\r\nclass RequestEditor extends Component{\r\n  constructor(){\r\n      super()\r\n      this.state={\r\n        asset:{\r\n              \"nid\": null,\r\n              \"stateNid\": null,\r\n              \"typeNid\": null,\r\n              \"brandNid\": null,\r\n              \"modelNid\": null,\r\n              \"locationNid\": null,\r\n              \"orgUnitNid\": null\r\n        },\r\n        urgencies:[],\r\n        states:[]\r\n      }\r\n      this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n\r\n    handleSubmit(e){\r\n      e.preventDefault();\r\n\r\n      if(e.target.urgency_nid.value===-3 && (e.target.motivo.value===null || e.target.motivo.value==='')){\r\n        alert(\"Debe ingresar un Motivo de Urgencia\");\r\n      }\r\n      else{\r\n        let request={\r\n            \"regUsrNid\": 1,\r\n            \"assetNid\": this.state.asset.nid,\r\n            \"orgUnitNid\": this.state.asset.orgUnitNid,\r\n            \"assetLocationNid\": this.state.asset.locationNid,\r\n            \"assetStateNid\": parseInt(e.target.state_nid.value),\r\n            \"urgencyNid\": parseInt(e.target.urgency_nid.value),\r\n            \"urgencyReason\": e.target.motivo.value,\r\n            \"reqNid\": 1,\r\n            \"problemText\": e.target.problem.value\r\n        }\r\n\r\n        fetch('https://demo.metaok.com/metacmms_test/api/corrective/v1/requests', {\r\n            method: 'POST',\r\n            body: JSON.stringify(request),\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            }\r\n        })\r\n        .then(response => {\r\n            if (response.status !== 200) {\r\n              console.log('Looks like there was a problem. Status Code: ' +response.status);\r\n              throw Error(response.status);;\r\n            }\r\n            return response;\r\n          })\r\n        .then(response => response.json())\r\n          .then(data => {\r\n            alert(\"Solicitud #\"+data.nid+\" generada con éxito\");\r\n            this.props.history.push(\r\n              {\r\n                pathname: '/'\r\n              }\r\n            )\r\n          }\r\n        )\r\n        .catch(function(error) {console.log(error);});\r\n\r\n        // .then(response => response.json())\r\n        // .then(data => {\r\n        //     if(data.type==\"OK\"){\r\n        //       alert(\"Solicitud #\"+data.data.nid+\" generada con éxito\");\r\n        //       this.props.history.push(\r\n        //         {\r\n        //           pathname: '/'\r\n        //         }\r\n        //       )\r\n        //     }\r\n        //   }\r\n        // )\r\n        // .catch(function(error) {console.log(error);});\r\n      }\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        fetch('https://demo.metaok.com/metacmms_test/api/inventory/v1/assets/'+this.props.match.params.nid, {\r\n            method: 'GET',\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            }\r\n        })\r\n\r\n        .then(response => response.json())\r\n        .then(data => {this.setState({ asset: data.data })\r\n          }\r\n        )\r\n        .catch(function(error) {console.log(error);});\r\n\r\n\r\n        fetch('https://demo.metaok.com/metacmms_test/api/corrective/v1/request-urgencies', {\r\n            method: 'GET',\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            }\r\n        })\r\n        .then(response => {\r\n            if (response.status !== 200) {\r\n              console.log('Looks like there was a problem. Status Code: ' +response.status);\r\n              throw Error(response.status);;\r\n            }\r\n            return response;\r\n          })\r\n        .then(response => response.json())\r\n          .then(data => {\r\n            this.setState({ urgencies: data })\r\n          }\r\n        )\r\n        .catch(function(error) {console.log(error);});\r\n\r\n\r\n        fetch('https://demo.metaok.com/metacmms_test/api/inventory/v1/asset-states', {\r\n              method: 'GET',\r\n              headers: {\r\n                  \"Content-Type\": \"application/json\"\r\n              }\r\n        })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            this.setState({ states: data.data })\r\n          }\r\n        )\r\n        .catch(function(error) {console.log(error);});\r\n    }\r\n\r\n    render(){\r\n\r\n      const urgencies=this.state.urgencies.map((data,index)=>{\r\n        return(\r\n          <div className=\"form-check form-check-inline\" >\r\n            <input className=\"form-check-input\" type=\"radio\" name=\"urgency_nid\" id={data.id} value={data.nid} key={data.id} required/>\r\n            <label className=\"form-check-label\" >{data.name}</label>\r\n          </div>\r\n        )\r\n      })\r\n\r\n      const states=this.state.states.map((data,index)=>{\r\n        return(\r\n          <div className=\"form-check form-check-inline\" >\r\n            <input className=\"form-check-input\" type=\"radio\" name=\"state_nid\" id={data.id} value={data.nid} key={data.id} required/>\r\n            <label className=\"form-check-label\">{data.name}</label>\r\n          </div>\r\n        )\r\n      })\r\n\r\n      return(\r\n        <div className=\"container\">\r\n          <div className=\"row row-header  bg-success\">\r\n          <div className=\"col-lg\">\r\n            Solicitud MC\r\n          </div>\r\n          <div className=\"col-lg\">\r\n            {this.state.asset.typeNid!=null && this.state.asset.type.name} {this.state.asset.brandNid!=null && this.state.asset.brand.name}\r\n          </div>\r\n          <div className=\"col-lg\">\r\n            {this.state.asset.modelNid!=null && this.state.asset.model.name}\r\n          </div>\r\n          <div className=\"col-lg\">\r\n            {this.state.asset.stateNid!=null && this.state.asset.state.name}\r\n          </div>\r\n          </div>\r\n          <form onSubmit={this.handleSubmit}>\r\n          <div className=\"row\" style={{textAlign:'center',marginTop:'20px'}}>\r\n\r\n            <div className=\"col-lg\">\r\n\r\n              <div className=\"separator\">\r\n                <span>Urgencia</span>\r\n              </div>\r\n\r\n                {urgencies}\r\n\r\n              <div className=\"form-group\" style={{marginTop:'20px'}}>\r\n                <label >Motivo</label>\r\n                <textarea className=\"form-control\" rows=\"2\" id=\"motivo\" name=\"motivo\"  ></textarea>\r\n              </div>\r\n\r\n              <div className=\"separator\">\r\n                <span>Problema</span>\r\n              </div>\r\n\r\n              <div className=\"form-group\" >\r\n                <textarea className=\"form-control\" rows=\"3\" id=\"problem\" name=\"problem\" required></textarea>\r\n              </div>\r\n\r\n              <div className=\"separator\">\r\n                <span>Estado del equipo</span>\r\n              </div>\r\n\r\n              <div style={{textAlign:'left'}}>\r\n\r\n                {states}\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"row\" style={{marginTop:'20px',marginBottom:'30px'}}>\r\n            <div className=\"col-md-4\" style={{textAlign:'center'}}>\r\n              <button className=\"btn btn-outline-primary btn-lg btn-full\">Enviar</button>\r\n            </div>\r\n            <div className=\"col-md-4\" style={{textAlign:'center',marginTop:'20px'}}>\r\n              <Link to={{pathname: `/assetEditor/${this.props.match.params.nid}`}}><button type=\"button\" className=\"btn btn-outline-secondary btn-lg btn-full\">Regresar</button></Link>\r\n            </div>\r\n          </div>\r\n\r\n          </form>\r\n\r\n        </div>\r\n      )\r\n    }\r\n}\r\n\r\nexport default RequestEditor;\r\n\r\n\r\n// <div className=\"form-check form-check-inline\">\r\n//   <input className=\"form-check-input\" type=\"radio\" name=\"urgency_nid\" id=\"urgency_nid\" value=\"-3\"  required/>\r\n//   <label className=\"form-check-label\">Urgente</label>\r\n// </div>\r\n// <div className=\"form-check form-check-inline\">\r\n//   <input className=\"form-check-input\" type=\"radio\" name=\"urgency_nid\" id=\"urgency_nid\" value=\"-2\" required/>\r\n//   <label className=\"form-check-label\" >Normal</label>\r\n// </div>\r\n// <div className=\"form-check form-check-inline\">\r\n//   <input className=\"form-check-input\" type=\"radio\" name=\"urgency_nid\" id=\"urgency_nid\" value=\"-1\" required/>\r\n//   <label className=\"form-check-label\" >Baja</label>\r\n// </div>\r\n\r\n//\r\n// <div className=\"form-check form-check\" >\r\n//   <input className=\"form-check-input\" type=\"radio\" name=\"state_nid\" id=\"state_nid\" value=\"1\" required/>\r\n//   <label className=\"form-check-label\">En servicio</label>\r\n// </div>\r\n// <div className=\"form-check form-check\">\r\n//   <input className=\"form-check-input\" type=\"radio\" name=\"state_nid\" id=\"state_nid\" value=\"-2\" required/>\r\n//   <label className=\"form-check-label\" >Fuera de Servicio</label>\r\n// </div>\r\n// <div className=\"form-check form-check\">\r\n//   <input className=\"form-check-input\" type=\"radio\" name=\"state_nid\" id=\"state_nid\" value=\"-3\" required/>\r\n//   <label className=\"form-check-label\" >En Servicio con errores</label>\r\n// </div>\r\n"]},"metadata":{},"sourceType":"module"}